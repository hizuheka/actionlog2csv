# actionlog2csv

## 概要

`actionlog2csv`は、指定されたフォルダ内のログファイルを解析し、重複を排除したログエントリをCSV形式で出力するGo言語のプログラムです。

## 使用法
actionlog2csv.exe <ログフォルダパス> <出力ファイルパス> <ワーカー数>


### 引数

- `<ログフォルダパス>`: ログファイルが格納されているフォルダのパス。
- `<出力ファイルパス>`: 解析結果を出力するCSVファイルのパス。
- `<ワーカー数>`: ログファイルの解析を並行して行うワーカーの数。

### 実行例

actionlog2csv.exe ./logs output.csv 4


## 機能説明

1. **ログフォルダの解析**: 指定されたフォルダ内のすべてのファイルを探索し、ログファイルを収集します。
2. **ログファイルの解析**: 収集したログファイルを並行して解析し、必要なログエントリを抽出します。
3. **重複の排除**: 抽出したログエントリから重複を排除します。
4. **CSVファイルへの出力**: 解析結果をCSVファイルに書き出します。

## プログラムの詳細

### `main`関数

1. コマンドライン引数を確認し、適切にパラメータを設定します。
2. フォルダ内のすべてのログファイルを解析するためのワーカーを起動します。
3. ワーカーがログファイルを解析し、結果を集約します。
4. 集約された結果をCSVファイルに書き出します。

### `processFile`関数

指定されたログファイルを読み込み、各行を解析して`LogEntry`構造体に変換します。重複を排除するために、結果をマップに格納します。

### `createEntry`関数

ログファイルの1行を解析し、`LogEntry`構造体を生成します。必要なフィールドがすべて揃っていない場合はエラーを返します。

### `writeOutputFile`関数

解析結果をCSVファイルに書き出します。CSVファイルにはヘッダー行が含まれ、各ログエントリが1行ずつ書き込まれます。

## ログエントリのフォーマット

ログファイルの各行は以下のようなフォーマットであることを前提としています。

src=<source> dst=<destination> interface=<interface> dir=<direction> action=<action> rule=<rule>


例:

src=192.168.1.1 dst=192.168.1.2 interface=eth0 dir=in action=accept rule=1


## 注意点

- ログフォルダ内のすべてのファイルを処理対象とします。特定の拡張子のみを処理するようにするには、プログラムを適宜修正してください。
- ワーカー数を適切に設定しないと、性能が低下する可能性があります。環境に応じて調整してください。

## 開発環境

- Go 1.18以降

## インストールとビルド

1. リポジトリをクローンします。

git clone <repository_url>
cd <repository_directory>


2. プログラムをビルドします。

go build -o actionlog2csv.exe


3. プログラムを実行します。

./actionlog2csv.exe <ログフォルダパス> <出力ファイルパス> <ワーカー数>


